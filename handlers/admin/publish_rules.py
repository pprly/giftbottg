from aiogram import Router
from aiogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, WebAppInfo
from aiogram.filters import Command
import config

router = Router()

@router.message(Command("publish_rules"))
async def publish_rules(message: Message):
    """–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª –≤ –∫–∞–Ω–∞–ª–µ —Å –∫–Ω–æ–ø–∫–æ–π"""
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —ç—Ç–æ –∞–¥–º–∏–Ω
    if message.from_user.id not in config.ADMIN_IDS:
        await message.answer("‚õî –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞!")
        return
    
    # –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç –ø—Ä–∞–≤–∏–ª
    text = (
        "üì¢ **–ü–†–ê–í–ò–õ–ê –£–ß–ê–°–¢–ò–Ø –í –ö–û–ù–ö–£–†–°–ê–•**\n\n"
        "üéØ **–ö–∞–∫ —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å:**\n"
        "1. –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª\n"
        "2. –ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥ –ø–æ—Å—Ç–æ–º\n"
        "3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤\n\n"
        "üí∞ **–¢–∏–ø—ã –∫–æ–Ω–∫—É—Ä—Å–æ–≤:**\n"
        "üÜì –ì–æ–ª–æ—Å–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ, –†–∞–Ω–¥–æ–º–∞–π–∑–µ—Ä\n"
        "‚≠ê 1 –∑–≤–µ–∑–¥–∞: –°–ø–∞–º-–∫–æ–Ω–∫—É—Ä—Å—ã\n\n"
        "‚ö†Ô∏è **–ù–∞–ø–∏—Å–∞–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å:**\n"
        "‚Ä¢ –ù–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é @username\n"
        "‚Ä¢ –° –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–º\n"
        "‚Ä¢ –° –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∫–æ–Ω–∫—É—Ä—Å–æ–≤\n\n"
        "‚ùå **–ó–∞–ø—Ä–µ—â–µ–Ω–æ:** –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç—ã, —Å–ø–∞–º, –±–æ—Ç—ã\n"
        "üö´ –ù–∞—Ä—É—à–µ–Ω–∏–µ = –¥–∏—Å–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è\n\n"
        "üéÅ –ü—Ä–∏–∑—ã –≤—ã–¥–∞—é—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –¥–Ω–µ–π\n\n"
        "‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Terms of Service Telegram\n\n"
        "üëá –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –ø–æ–ª–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª"
    )
    
    # –ö–Ω–æ–ø–∫–∞ —Å Web App
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="üìñ –û—Ç–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞",
            web_app=WebAppInfo(url="http://YOUR-IP:8080/rules.html")
        )]
    ])
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –∫–∞–Ω–∞–ª
    await message.bot.send_message(
        chat_id=config.CHANNEL_ID,
        text=text,
        parse_mode="Markdown",
        reply_markup=keyboard
    )
    
    await message.answer("‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –≤ –∫–∞–Ω–∞–ª–µ!")